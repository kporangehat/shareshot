{% extends 'library/base.html' %}
{% load ratings %}

{% block content %}

<div class="col-md-8">
    <h1>{{ bundle.name }}</h1>
    <p>By <a href="https://github.com/{{ bundle.authors }}">{{ bundle.authors }}</a></p>
    <p>{{ bundle.description }}</p>
    <p>&nbsp;</p>
    <h4 class="category">Category: {{ bundle.category }}</h4>
    <h4 class="category">Tags:
        {% for label in label_list %}
            <button type="button" class="btn btn-info btn-xs">{{ label }}</button>
        {% endfor %}
    </h4>

    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
    {% if message %}<p><strong>{{ message }}</strong></p>{% endif %}

    <h4 class="category">Homepage:
        {% if bundle.homepage %}
            <a href="{{ bundle.homepage }}">{{ bundle.homepage }}</a>
        {% else %}
            <a href="{{ bundle.source_url }}">{{ bundle.source_url }}</a>
        {% endif %}
    </h4>
    <p>&nbsp;</p>

    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Readme</h3>
        </div>
        <div class="panel-body">
            {{ readme_html|safe }}
        </div>
    </div>
</div>

<div class="col-md-4">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Releases</h3>
        </div>
        <div class="panel-body">
            <dl id="releases">
                {% for release in release_list %}
                <dt>
                   <strong><a href="{{ release.url }}">{{ release.version }}</a></strong>
                    <span class="date">{{ release.date|date }}</span>
                 </dt>
                <dd>
                     {% if release.download_url %}
                        <a href="{{ release.download_url }}" class="btn btn-default btn-xs download-button" role="button">Download (.zip)</a>
                    {% endif %}
                </dd>
                {% endfor %}
            </dl>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Activity</h3>
        </div>
        <div class="panel-body">
            <dl class="dl-horizontal">
                <dt>Stars</dt>
                <dd>54</dd>
                <dt>Forks</dt>
                <dd>22</dd>
                <dt>Last Modified</dt>
                <dd>{{ bundle.last_modified|date }}</dd>
                <dt>Last Seen</dt>
                <dd>{{ bundle.last_seen|date }}</dd>
            </dl>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Ratings</h3>
        </div>
        <div class="panel-body">
            {% ratings object %}
        </div>
    </div>
</div>
    <!--<pre> {% filter force_escape %} {% debug %} {% endfilter %} </pre>-->
{% endblock %}